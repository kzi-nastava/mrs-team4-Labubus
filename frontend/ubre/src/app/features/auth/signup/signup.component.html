<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
<div class="signup-container">
  <h1 class="title">Sign up</h1>

  <form [formGroup]="signUpForm" (ngSubmit)="onSubmit()" class="signup-form">
    <div class="form-grid">
      <div class="form-group">
        <label>Name</label>
        <input
          formControlName="name"
          [class.error-border]="isInvalid('name')"
          placeholder="Enter your name"
        />
        <span class="error-text" [style.opacity]="isInvalid('name') ? 1 : 0">Name is required</span>
      </div>

      <div class="form-group">
        <label>Surname</label>
        <input
          formControlName="surname"
          [class.error-border]="isInvalid('surname')"
          placeholder="Enter your surname"
        />
        <span class="error-text" [style.opacity]="isInvalid('surname') ? 1 : 0"
          >Surname is required</span
        >
      </div>

      <div class="form-group">
        <label>Phone number</label>
        <input
          formControlName="phoneNumber"
          [class.error-border]="isInvalid('phoneNumber')"
          placeholder="Enter phone number"
        />
        <span class="error-text" [style.opacity]="isInvalid('phoneNumber') ? 1 : 0"
          >Only numbers allowed</span
        >
      </div>

      <div class="form-group">
        <label>Address</label>
        <input
          formControlName="address"
          [class.error-border]="isInvalid('address')"
          placeholder="Enter your address"
        />
        <span class="error-text" [style.opacity]="isInvalid('address') ? 1 : 0"
          >Address is required</span
        >
      </div>

      <div class="form-group">
        <label>Email</label>
        <input
          type="email"
          formControlName="email"
          [class.error-border]="isInvalid('email')"
          placeholder="Enter your email"
        />
        <span class="error-text" [style.opacity]="isInvalid('email') ? 1 : 0"
          >Enter a valid email</span
        >
      </div>

      <div class="form-group">
        <label>Profile picture (optional)</label>
        <div class="input-wrapper" (click)="fileInput.click()">
          <input
            type="text"
            [value]="fileName"
            placeholder="Choose profile picture"
            readonly
            class="file-display"
          />
          <input
            #fileInput
            type="file"
            (change)="onFileSelected($event)"
            accept="image/*"
            style="display: none"
          />
          <span class="material-symbols-outlined suffix-icon">attach_file</span>
        </div>
      </div>

      <div class="form-group">
        <label>Password</label>
        <div class="input-wrapper">
          <input
            [type]="showPassword ? 'text' : 'password'"
            formControlName="password"
            [class.error-border]="isInvalid('password')"
            placeholder="Enter password"
          />
          <span
            class="material-symbols-outlined suffix-icon"
            (click)="showPassword = !showPassword"
          >
            {{ showPassword ? 'visibility' : 'visibility_off' }}
          </span>
        </div>
        <span class="error-text" [style.opacity]="isInvalid('password') ? 1 : 0"
          >Min 6 characters</span
        >
      </div>

      <div class="form-group">
        <label>Confirm password</label>
        <div class="input-wrapper">
          <input
            [type]="showConfirmPassword ? 'text' : 'password'"
            formControlName="confirmPassword"
            [class.error-border]="
              isInvalid('confirmPassword') || signUpForm.hasError('passwordMismatch')
            "
            placeholder="Enter password"
          />
          <span
            class="material-symbols-outlined suffix-icon"
            (click)="showConfirmPassword = !showConfirmPassword"
          >
            {{ showConfirmPassword ? 'visibility' : 'visibility_off' }}
          </span>
        </div>
        <span
          class="error-text"
          [style.opacity]="
            signUpForm.hasError('passwordMismatch') && signUpForm.get('confirmPassword')?.touched
              ? 1
              : 0
          "
        >
          Passwords do not match
        </span>
      </div>
    </div>

    <div class="actions">
      <app-button width="300px" variant="filled" class="signup-btn" type="submit"
        >Sign up</app-button
      >
      <p class="footer-text">Already have an account? <a href="/login">Login</a></p>
    </div>
  </form>
</div>
@if (showSuccessModal) {
<app-modal
  class="cd-modal show"
  title="Registration Successful!"
  message="We've sent an activation link to your email address."
  buttonText="OK"
  (action)="onCdModalAction()"
>
</app-modal>
}
